<style>
  body {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
    background: repeating-linear-gradient(45deg, #111 0, #111 10px, #1c1c1c 10px, #1c1c1c 20px);
    font-family: 'Courier New', monospace;
    color: #e0e0e0;
    cursor: crosshair;
  }

  main {
    border: 2px solid #0f0;
    padding: 20px;
    width: 320px;
    background-color: #000;
    box-shadow: 0 0 30px rgba(0, 255, 0, 0.3);
    opacity: 1;
    transition: all 3s;
    position: relative;
    z-index: 2;
  }

  main::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: linear-gradient(to right, #00ff88, transparent);
    animation: scan 2s linear infinite;
  }

  @keyframes scan {
    0% { transform: translateX(-100%); opacity: 0.1; }
    50% { opacity: 0.5; }
    100% { transform: translateX(100%); opacity: 0.1; }
  }

  .title {
    font-size: 16px;
    margin-bottom: 10px;
    color: #ff4c4c;
    text-transform: uppercase;
    letter-spacing: 1px;
    border-bottom: 1px solid #0f0;
    padding-bottom: 5px;
  }

  p {
    font-size: 12px;
    color: #ccc;
    text-transform: uppercase;
    margin: 8px 0;
  }

  .captcha {
    width: 100%;
    border: 2px solid #0f0;
    filter: grayscale(30%) contrast(120%);
    margin-bottom: 10px;
  }

  .answer,
  textarea {
    width: 100%;
    padding: 10px;
    background-color: #111;
    border: 1px solid #0f0;
    color: #0f0;
    font-family: 'Courier New', monospace;
    margin-top: 10px;
    resize: none;
  }

  .enter {
    width: 100%;
    margin-top: 12px;
    padding: 10px;
    background-color: black;
    border: 2px solid #0f0;
    color: #0f0;
    font-family: 'Courier New', monospace;
    cursor: pointer;
    transition: background 0.3s, color 0.3s;
    text-transform: uppercase;
  }

  .enter:hover {
    background-color: #0f0;
    color: black;
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 8px;
    margin-top: 10px;
  }

  .box {
    border: 2px solid #0f0;
    cursor: pointer;
    filter: grayscale(70%);
    transition: transform 0.2s, filter 0.2s, border-color 0.2s;
    background-color: #111;
  }

  .box img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
  }

  .box.selected {
    border-color: lime;
    filter: grayscale(0%) brightness(130%);
    transform: scale(1.05);
  }

  .zoom-out {
    transform: scale(4);
    opacity: 0;
    transition: transform 2s ease, opacity 2s ease;
  }

  .response {
    margin-top: 15px;
    font-size: 12px;
    color: #ccc;
    font-style: italic;
    border-top: 1px solid #0f0;
    padding-top: 8px;
  }
</style>


<main>
  <h1 class="title">Says Something</h1>
  <img class="captcha" src="keyboard-cat.jpg" alt="captcha image">
  <p></p>
  <input type="text" class="answer">
  <button class="enter">Enter</button>
</main>

<main id="grid-captcha" style="display: none;">
  <h1 class="title">Select all valid forms of ID for entry into the US</h1>
  <p></p>

  <div class="grid">
    <div class="box" data-correct="false"><img src="library card.webp" alt=""></div>
    <div class="box" data-correct="false"><img src="library.jpg" alt=""></div>
    <div class="box" data-correct="false"><img src="oregon.webp" alt=""></div>
    <div class="box" data-correct="true"><img src="passport.avif" alt=""></div>
    <div class="box" data-correct="false"><img src="mpassport.jpeg" alt=""></div>
    <div class="box" data-correct="true"><img src="realid.jpg" alt=""></div>
  </div>

  <button class="enter grid-submit">Submit</button>
</main>

<main id="grid-captcha-2" style="display: none;">
  <h1 class="title">Select all the verified border crossings</h1>
  <p></p>
  <div class="grid">
    <div class="box" data-correct="true"><img src="customs.jpg" alt=""></div>
    <div class="box" data-correct="false"><img src="fores.jpg" alt=""></div>
    <div class="box" data-correct="false"><img src="sewer.webp" alt=""></div>
    <div class="box" data-correct="true"><img src="airport.jpg" alt=""></div>
    <div class="box" data-correct="false"><img src="desert.webp" alt=""></div>
    <div class="box" data-correct="true"><img src="land.jpg" alt=""></div>
  </div>
  <button class="enter grid-submit-2">Submit</button>
</main>

<main id="grid-captcha-3" style="display: none;">
  <h1 class="title">Select all non-citizens</h1>
  <p></p>
  <div class="grid">
    <div class="box" data-correct="false"><img src="white.jpg" alt=""></div>
    <div class="box" data-correct="true"><img src="we fee.webp" alt=""></div>
    <div class="box" data-correct="false"><img src="immi.jpg" alt=""></div>
    <div class="box" data-correct="false"><img src="america.webp" alt=""></div>
    <div class="box" data-correct="true"><img src="fence.jpg" alt=""></div>
    <div class="box" data-correct="false"><img src="flag.jpeg" alt=""></div>
  </div>
  <button class="enter grid-submit-3">Submit</button>
</main>

<main id="border-captcha-1" style="display: none;">
  <div class="title">Border Statement</div>
  <div class="prompt">To proceed, state your purpose in entering the United States.</div>
  <textarea id="userStatement" placeholder="Type something meaningful..."></textarea>
  <button onclick="validateBorderCaptcha()">Submit</button>
  <div class="response" id="captchaResponse"></div>
</main>
<main id="border-captcha-2" style="display: none;">
  <div class="title">Declaration of Loss</div>
  <div class="prompt">We record what is no longer with you. Type what youâ€™ve left behind.</div>
  <textarea id="userLoss" placeholder=""></textarea>
  <button onclick="validateLossCaptcha()">Submit</button>
  <div class="response" id="lossResponse"></div>
</main>
<main id="border-captcha-3" style="display: none;">
  <div class="title">Justification</div>
  <div class="prompt">Why do you deserve entry into the United States?</div>
  <textarea id="userJustification" placeholder="In 50 words or less..."></textarea>
  <button onclick="validateJustification()">Submit</button>
  <div class="response" id="justificationResponse"></div>
</main>
<main id="final-entry-message" style="display: none;">
  <h1 class="title">Entry Granted</h1>
  <p style="color: #0f0; font-size: 14px; text-transform: uppercase; margin-top: 10px;">
    Your answers have been recorded.<br>
    Access granted.<br>
    Welcome.
  </p>
</main>


<script src="https://cdn.jsdelivr.net/gh/netizenorg/netnet-standard-library/build/nn.min.js"></script>
<script>
/* global nn */
let cap = 0
  const data = [
    {
      title: 'Type the text you see in the image:',
      image: '3ntrydenied.png',
      answer: '3ntryD3n13d'
    },
    {
      title: 'Type the text you see in the image:',
      image: 'captcha.png',
      answer: 'i113g41a1i3n'
    },
    {
      title: 'Type the text you see in the image:',
      image: 'captcha (1).png',
      answer: '4syLUmd3n13d'
    }
  ]

  function updateCaptcha () {
    const c = data[cap]
    nn.get('.title').content(c.title)
    nn.get('.captcha').set({ src: c.image })
    nn.get('.answer').value = ''
  }

  async function checkCaptcha () {
    localStorage.setItem('cap', cap)
    const c = data[cap]
    const text = nn.get('.answer').value
    if (text.toLowerCase() === c.answer.toLowerCase()) {
  cap++
  nn.get('main')
    .scale(4)
    .css({ opacity: 0 })
  await nn.sleep(3000)

  if (cap >= data.length) {
    // All text CAPTCHAs are done, show the grid
    document.querySelector('main').style.display = 'none'
    document.getElementById('grid-captcha').style.display = 'block'
  } else {
    updateCaptcha()
    await nn.sleep(100)
    nn.get('main')
      .scale(1)
      .css({ opacity: 1, transition: 'none' })
    await nn.sleep(100)
    nn.get('main').css({ transition: 'all 3s' })
  }
}

  }
  
 // for middle level, look down at your hands, pick which box best matches the shade within your visio

nn.get('.enter').on('click', checkCaptcha)
nn.on('load', () => {
  if (cap >= data.length) {
    // Skip to grid CAPTCHA if text CAPTCHAs already done
    document.querySelector('main').style.display = 'none'
    document.getElementById('grid-captcha').style.display = 'block'
  } else {
    updateCaptcha()
  }
})
// Grid selection toggle
document.querySelectorAll('.box').forEach(box => {
  box.addEventListener('click', () => {
    box.classList.toggle('selected')
  })
})

// Grid answer check
document.querySelector('.grid-submit').addEventListener('click', async () => {
  let allCorrect = true
  document.querySelectorAll('#grid-captcha .box').forEach(box => {
    const correct = box.getAttribute('data-correct') === 'true'
    const selected = box.classList.contains('selected')
    if (correct !== selected) allCorrect = false
  })

  if (allCorrect) {
    localStorage.setItem('captchaDone', 'true')
    const gridMain = document.getElementById('grid-captcha')
    gridMain.classList.add('zoom-out')
    await new Promise(resolve => setTimeout(resolve, 2000))
    gridMain.style.display = 'none'
    document.getElementById('grid-captcha-2').style.display = 'block'
  } else {
    alert('Checkpoint failed. Try again.')
  }
})
 document.querySelector('.grid-submit-2').addEventListener('click', async () => {
  let allCorrect = true
  document.querySelectorAll('#grid-captcha-2 .box').forEach(box => {
    const correct = box.getAttribute('data-correct') === 'true'
    const selected = box.classList.contains('selected')
    if (correct !== selected) allCorrect = false
  })

  if (allCorrect) {
    const gridMain2 = document.getElementById('grid-captcha-2')
    gridMain2.classList.add('zoom-out')
    await new Promise(resolve => setTimeout(resolve, 2000))
    gridMain2.style.display = 'none'
    document.getElementById('grid-captcha-3').style.display = 'block'
  } else {
    alert('Failed.')
  }
})
  
document.querySelector('.grid-submit-3').addEventListener('click', async () => {
  let allCorrect = true
  document.querySelectorAll('#grid-captcha-3 .box').forEach(box => {
    const correct = box.getAttribute('data-correct') === 'true'
    const selected = box.classList.contains('selected')
    if (correct !== selected) allCorrect = false
  })

  if (allCorrect) {
    const gridMain3 = document.getElementById('grid-captcha-3')
    gridMain3.classList.add('zoom-out')
    await new Promise(resolve => setTimeout(resolve, 2000))
    gridMain3.style.display = 'none'
    document.getElementById('border-captcha-1').style.display = 'block'
  } else {
    alert('Failed. Try again.')
  }
})

function skipToFinalCaptcha() {
  // Hide all other captcha sections
  document.querySelectorAll('main').forEach(m => m.style.display = 'none')

  // Show final captcha
  const final = document.getElementById('grid-captcha-3')
  if (final) {
    final.style.display = 'block'
    localStorage.setItem('cap', data.length) // so your code won't auto-redirect back
  }
}
  
 function validateBorderCaptcha() {
  const input = document.getElementById('userStatement').value.trim()
  const response = document.getElementById('captchaResponse')
  const border1 = document.getElementById('border-captcha-1')
  const border2 = document.getElementById('border-captcha-2')

  if (input.length === 0) {
    response.textContent = "Silence is also a choice. But not a valid one here."
  } else {
    response.textContent = `"${input}" logged. The gate acknowledges your intent.`
    
    // Animate zoom-out of the first captcha
    border1.classList.add('zoom-out')

    setTimeout(() => {
      border1.style.display = 'none'
      border2.style.display = 'block'
    }, 2000) // matches transition duration
  }
}

function validateLossCaptcha() {
  const input = document.getElementById('userLoss').value.trim()
  const response = document.getElementById('lossResponse')

  if (input.length === 0) {
    response.textContent = "Nothing? That too will be recorded."
  } else {
    response.textContent = `"${input}" has been registered as loss.`
    // Optional: transition to next CAPTCHA or end scene
    setTimeout(() => {
  document.getElementById('border-captcha-2').classList.add('zoom-out')
}, 1000)

setTimeout(() => {
  document.getElementById('border-captcha-2').style.display = 'none'
  document.getElementById('border-captcha-3').style.display = 'block'
  document.getElementById('border-captcha-3').scrollIntoView({ behavior: 'smooth' })
}, 2500)
  }
}
function validateJustification() {
  const input = document.getElementById('userJustification').value.trim()
  const response = document.getElementById('justificationResponse')
  const border3 = document.getElementById('border-captcha-3')
  const finalMessage = document.getElementById('final-entry-message')

  if (input.length === 0) {
    response.textContent = "An absence of reason is still a reason."
  } else {
    response.textContent = `"${input}" has been noted. This record will be reviewed by unseen authorities.`

    // Animate transition to final message
    setTimeout(() => {
      border3.classList.add('zoom-out')
    }, 1500)

    setTimeout(() => {
      border3.style.display = 'none'
      finalMessage.style.display = 'block'
      finalMessage.scrollIntoView({ behavior: 'smooth' })
    }, 3000)
  }
}


</script>
